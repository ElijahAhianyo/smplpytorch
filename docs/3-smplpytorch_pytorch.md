# Smplpytorch Pytorch

[_Documentation generated by Documatic_](https://www.documatic.com)

<!---Documatic-section-Codebase Structure-start--->
## Codebase Structure

<!---Documatic-block-system_architecture-start--->
```mermaid
flowchart LR
pytorch-->native
```
<!---Documatic-block-system_architecture-end--->

# #
<!---Documatic-section-Codebase Structure-end--->

<!---Documatic-section-smplpytorch.pytorch.tensutils.th_posemap_axisang-start--->
## [smplpytorch.pytorch.tensutils.th_posemap_axisang](3-smplpytorch_pytorch.md#smplpytorch.pytorch.tensutils.th_posemap_axisang)

<!---Documatic-section-th_posemap_axisang-start--->
<!---Documatic-block-smplpytorch.pytorch.tensutils.th_posemap_axisang-start--->
<details>
	<summary><code>smplpytorch.pytorch.tensutils.th_posemap_axisang</code> code snippet</summary>

```python
def th_posemap_axisang(pose_vectors):
    rot_nb = int(pose_vectors.shape[1] / 3)
    rot_mats = []
    for joint_idx in range(rot_nb):
        axis_ang = pose_vectors[:, joint_idx * 3:(joint_idx + 1) * 3]
        rot_mat = rodrigues_layer.batch_rodrigues(axis_ang)
        rot_mats.append(rot_mat)
    rot_mats = torch.cat(rot_mats, 1)
    return rot_mats
```
</details>
<!---Documatic-block-smplpytorch.pytorch.tensutils.th_posemap_axisang-end--->
<!---Documatic-section-th_posemap_axisang-end--->

# #
<!---Documatic-section-smplpytorch.pytorch.tensutils.th_posemap_axisang-end--->

<!---Documatic-section-smplpytorch.pytorch.tensutils.th_with_zeros-start--->
## [smplpytorch.pytorch.tensutils.th_with_zeros](3-smplpytorch_pytorch.md#smplpytorch.pytorch.tensutils.th_with_zeros)

<!---Documatic-section-th_with_zeros-start--->
<!---Documatic-block-smplpytorch.pytorch.tensutils.th_with_zeros-start--->
<details>
	<summary><code>smplpytorch.pytorch.tensutils.th_with_zeros</code> code snippet</summary>

```python
def th_with_zeros(tensor):
    batch_size = tensor.shape[0]
    padding = tensor.new([0.0, 0.0, 0.0, 1.0])
    padding.requires_grad = False
    concat_list = [tensor, padding.view(1, 1, 4).repeat(batch_size, 1, 1)]
    cat_res = torch.cat(concat_list, 1)
    return cat_res
```
</details>
<!---Documatic-block-smplpytorch.pytorch.tensutils.th_with_zeros-end--->
<!---Documatic-section-th_with_zeros-end--->

# #
<!---Documatic-section-smplpytorch.pytorch.tensutils.th_with_zeros-end--->

<!---Documatic-section-smplpytorch.pytorch.tensutils.th_pack-start--->
## [smplpytorch.pytorch.tensutils.th_pack](3-smplpytorch_pytorch.md#smplpytorch.pytorch.tensutils.th_pack)

<!---Documatic-section-th_pack-start--->
<!---Documatic-block-smplpytorch.pytorch.tensutils.th_pack-start--->
<details>
	<summary><code>smplpytorch.pytorch.tensutils.th_pack</code> code snippet</summary>

```python
def th_pack(tensor):
    batch_size = tensor.shape[0]
    padding = tensor.new_zeros((batch_size, 4, 3))
    padding.requires_grad = False
    pack_list = [padding, tensor]
    pack_res = torch.cat(pack_list, 2)
    return pack_res
```
</details>
<!---Documatic-block-smplpytorch.pytorch.tensutils.th_pack-end--->
<!---Documatic-section-th_pack-end--->

# #
<!---Documatic-section-smplpytorch.pytorch.tensutils.th_pack-end--->

<!---Documatic-section-smplpytorch.pytorch.tensutils.subtract_flat_id-start--->
## [smplpytorch.pytorch.tensutils.subtract_flat_id](3-smplpytorch_pytorch.md#smplpytorch.pytorch.tensutils.subtract_flat_id)

<!---Documatic-section-subtract_flat_id-start--->
<!---Documatic-block-smplpytorch.pytorch.tensutils.subtract_flat_id-start--->
<details>
	<summary><code>smplpytorch.pytorch.tensutils.subtract_flat_id</code> code snippet</summary>

```python
def subtract_flat_id(rot_mats):
    id_flat = torch.eye(3, dtype=rot_mats.dtype, device=rot_mats.device).view(1, 9).repeat(rot_mats.shape[0], 23)
    results = rot_mats - id_flat
    return results
```
</details>
<!---Documatic-block-smplpytorch.pytorch.tensutils.subtract_flat_id-end--->
<!---Documatic-section-subtract_flat_id-end--->

# #
<!---Documatic-section-smplpytorch.pytorch.tensutils.subtract_flat_id-end--->

<!---Documatic-section-smplpytorch.pytorch.tensutils.make_list-start--->
## [smplpytorch.pytorch.tensutils.make_list](3-smplpytorch_pytorch.md#smplpytorch.pytorch.tensutils.make_list)

<!---Documatic-section-make_list-start--->
<!---Documatic-block-smplpytorch.pytorch.tensutils.make_list-start--->
<details>
	<summary><code>smplpytorch.pytorch.tensutils.make_list</code> code snippet</summary>

```python
def make_list(tensor):
    return tensor
```
</details>
<!---Documatic-block-smplpytorch.pytorch.tensutils.make_list-end--->
<!---Documatic-section-make_list-end--->

# #
<!---Documatic-section-smplpytorch.pytorch.tensutils.make_list-end--->

<!---Documatic-section-smplpytorch.pytorch.rodrigues_layer.quat2mat-start--->
## [smplpytorch.pytorch.rodrigues_layer.quat2mat](3-smplpytorch_pytorch.md#smplpytorch.pytorch.rodrigues_layer.quat2mat)

<!---Documatic-section-quat2mat-start--->
<!---Documatic-block-smplpytorch.pytorch.rodrigues_layer.quat2mat-start--->
<details>
	<summary><code>smplpytorch.pytorch.rodrigues_layer.quat2mat</code> code snippet</summary>

```python
def quat2mat(quat):
    norm_quat = quat
    norm_quat = norm_quat / norm_quat.norm(p=2, dim=1, keepdim=True)
    (w, x, y, z) = (norm_quat[:, 0], norm_quat[:, 1], norm_quat[:, 2], norm_quat[:, 3])
    batch_size = quat.size(0)
    (w2, x2, y2, z2) = (w.pow(2), x.pow(2), y.pow(2), z.pow(2))
    (wx, wy, wz) = (w * x, w * y, w * z)
    (xy, xz, yz) = (x * y, x * z, y * z)
    rotMat = torch.stack([w2 + x2 - y2 - z2, 2 * xy - 2 * wz, 2 * wy + 2 * xz, 2 * wz + 2 * xy, w2 - x2 + y2 - z2, 2 * yz - 2 * wx, 2 * xz - 2 * wy, 2 * wx + 2 * yz, w2 - x2 - y2 + z2], dim=1).view(batch_size, 3, 3)
    return rotMat
```
</details>
<!---Documatic-block-smplpytorch.pytorch.rodrigues_layer.quat2mat-end--->
<!---Documatic-section-quat2mat-end--->

# #
<!---Documatic-section-smplpytorch.pytorch.rodrigues_layer.quat2mat-end--->

<!---Documatic-section-smplpytorch.pytorch.rodrigues_layer.batch_rodrigues-start--->
## [smplpytorch.pytorch.rodrigues_layer.batch_rodrigues](3-smplpytorch_pytorch.md#smplpytorch.pytorch.rodrigues_layer.batch_rodrigues)

<!---Documatic-section-batch_rodrigues-start--->
```mermaid
flowchart LR
smplpytorch.pytorch.rodrigues_layer.batch_rodrigues-->smplpytorch.pytorch.rodrigues_layer.quat2mat
```

### Object Calls

* [smplpytorch.pytorch.rodrigues_layer.quat2mat](3-smplpytorch_pytorch.md#smplpytorch.pytorch.rodrigues_layer.quat2mat)

<!---Documatic-block-smplpytorch.pytorch.rodrigues_layer.batch_rodrigues-start--->
<details>
	<summary><code>smplpytorch.pytorch.rodrigues_layer.batch_rodrigues</code> code snippet</summary>

```python
def batch_rodrigues(axisang):
    axisang_norm = torch.norm(axisang + 1e-08, p=2, dim=1)
    angle = torch.unsqueeze(axisang_norm, -1)
    axisang_normalized = torch.div(axisang, angle)
    angle = angle * 0.5
    v_cos = torch.cos(angle)
    v_sin = torch.sin(angle)
    quat = torch.cat([v_cos, v_sin * axisang_normalized], dim=1)
    rot_mat = quat2mat(quat)
    rot_mat = rot_mat.view(rot_mat.shape[0], 9)
    return rot_mat
```
</details>
<!---Documatic-block-smplpytorch.pytorch.rodrigues_layer.batch_rodrigues-end--->
<!---Documatic-section-batch_rodrigues-end--->

# #
<!---Documatic-section-smplpytorch.pytorch.rodrigues_layer.batch_rodrigues-end--->

<!---Documatic-section-smplpytorch.pytorch.rodrigues_layer.th_get_axis_angle-start--->
## [smplpytorch.pytorch.rodrigues_layer.th_get_axis_angle](3-smplpytorch_pytorch.md#smplpytorch.pytorch.rodrigues_layer.th_get_axis_angle)

<!---Documatic-section-th_get_axis_angle-start--->
<!---Documatic-block-smplpytorch.pytorch.rodrigues_layer.th_get_axis_angle-start--->
<details>
	<summary><code>smplpytorch.pytorch.rodrigues_layer.th_get_axis_angle</code> code snippet</summary>

```python
def th_get_axis_angle(vector):
    angle = torch.norm(vector, 2, 1)
    axes = vector / angle.unsqueeze(1)
    return (axes, angle)
```
</details>
<!---Documatic-block-smplpytorch.pytorch.rodrigues_layer.th_get_axis_angle-end--->
<!---Documatic-section-th_get_axis_angle-end--->

# #
<!---Documatic-section-smplpytorch.pytorch.rodrigues_layer.th_get_axis_angle-end--->

[_Documentation generated by Documatic_](https://www.documatic.com)